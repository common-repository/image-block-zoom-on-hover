!function(i){"use strict";const t=window.gpls_ibzoh_localized_data;function n(n,s){this._isMouseIn=i=>{let t=i.pageX,n=i.pageY;return!(t<this.boundaries.left||n>this.boundaries.bottom||n<this.boundaries.top||t>this.boundaries.right)},this._events=()=>{this.$container.on("mouseenter",(t=>{let n=i(t.target);this.checkImageChanged(n),this.showLens()})),this.$container.parent().on("mousemove",(i=>{this.moveLens(i.pageX,i.pageY)})),this.$container.parent().on("mouseleave",(i=>{this.hideLens()}))},this._init=function(s){"object"!=typeof s&&(s={}),this.settings={lensPinningDistance:20},this.settings=i.extend(this.settings,s),this.$container=n,this.$container.after('<div class="'+t.zoomOnHoverLensClass+' hidden"></div>'),this._calculateImagesSize(),this.$lens=i("."+t.zoomOnHoverLensClass,this.$container.parent()),this.lensWidth=this.$lens.width(),this.lensHeight=this.$lens.height(),this.lensWidthHalf=this.lensWidth/2,this.lensHeightHalf=this.lensHeight/2,this.currentLensPositionX=0,this.currentLensPositionY=0,this.boundaries=this.$container.get(0).getBoundingClientRect(),this.$lens.css("background-image","url('"+this.zoomedImgSrc+"')"),this._events()},this._calculateImagesSize=function(){this.imgSrc=this._findOriginalImg(this.$container);let t=this._findOriginalImgDimensions(this.$container);if(this.imgSrc&&(this.zoomedImgSrc=this.$container.data("zoomed"),this.zoomedImgSrc)){var n=this;i("<img src='"+this.imgSrc+"'/>").on("load",(function(){var s=t.width?t.width:this.width,e=t.height?t.height:this.height;n.containterWidth=n.$container.width(),n.containterHeight=n.$container.height(),i("<img src='"+n.zoomedImgSrc+"'/>").on("load",(function(){this.width<s||this.height<e?(n.zoomedImgSrc=n.imgSrc,n.imgWidthRatio=1,n.imgHeightRatio=1):(n.imgWidthRatio=this.width/s,n.imgHeightRatio=this.height/e)}))}))}},this._findOriginalImg=function(i){return i.attr("src")},this._findOriginalImgDimensions=function(i){let t={};if(i.length){let n=i,s=n.width(),e=n.height();s&&(t.width=s),e&&(t.height=e)}return t},this.calculateBackgroundPosition=function(){var i=(this.currentLensPositionX-this.$container.offset().left+this.lensWidthHalf)*this.imgWidthRatio*-1+this.lensWidthHalf,t=(this.currentLensPositionY-this.$container.offset().top+this.lensHeightHalf)*this.imgHeightRatio*-1+this.lensHeightHalf;this.$lens.css("background-position",i+"px "+t+"px")},this._init(s)}i(document).ready((function(){var n;n=t.zoomOnHoverClass,i("."+n).find("img").each((function(){i(this).GPLS_IBZOH_Zoom_On_Hover()}))})),i.fn.GPLS_IBZOH_Zoom_On_Hover=function(t){new n(i(this),t)},n.prototype.showLens=function(){this.$lens.removeClass("hidden")},n.prototype.hideLens=function(){this.$lens.addClass("hidden")},n.prototype.checkImageChanged=function(i){var t=this._findOriginalImg(i);t!=this.imgSrc&&(0!=t?this.reinitialize(i):this.hideLens())},n.prototype.reinitialize=function(i){this.$container=i,this.containterWidth=this.$container.width(),this.containterHeight=this.$container.height(),this._calculateImagesSize(),this.$lens.css("background-image","url('"+this.zoomedImgSrc+"')")},n.prototype.moveLens=function(i,t){var n=i-this.lensWidthHalf,s=t-this.lensHeightHalf,e=this.$container.offset().left-this.lensWidthHalf,h=this.$container.offset().top-this.lensHeightHalf,o=e+this.containterWidth,a=h+this.containterHeight,r=!1;n<=e?(e-n>=this.settings.lensPinningDistance&&(r=!0),n=e):n>=o&&(n-o>=this.settings.lensPinningDistance&&(r=!0),n=o),s<=h?(h-s>=this.settings.lensPinningDistance&&(r=!0),s=h):s>=a&&(s-a>=this.settings.lensPinningDistance&&(r=!0),s=a),r?this.hideLens():this.showLens(),this.$lens.offset({left:n,top:s}),this.currentLensPositionX=n,this.currentLensPositionY=s,this.calculateBackgroundPosition()}}(jQuery);